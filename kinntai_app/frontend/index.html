<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - é–‹ç™ºç’°å¢ƒ</title>
  <style>
    .attendance-card { border: 1px solid #ddd; padding: 1rem; margin: 1rem 0; border-radius: 8px; }
    .time-row { display: flex; justify-content: space-between; margin: 0.5rem 0; }
    .label { font-weight: bold; }
    .loading { text-align: center; color: #666; }
    .error { color: red; text-align: center; }
    body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
    
    /* Phaseç”¨ã®è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« */
    .phase-section {
      margin: 2rem 0;
      padding: 1.5rem;
      border: 2px solid #4a6da7;
      border-radius: 8px;
      background: #f8f9fa;
    }
    .phase-title {
      color: #4a6da7;
      margin-top: 0;
      font-size: 1.3rem;
    }
    .test-buttons {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    .test-buttons button {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .btn-primary { background: #007bff; color: white; }
    .btn-success { background: #28a745; color: white; }
    .btn-warning { background: #ffc107; color: black; }
    .btn-info { background: #17a2b8; color: white; }
    .btn-secondary { background: #6c757d; color: white; }
    
    /* å®Œäº†ã—ãŸPhaseã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .phase-completed {
      border-color: #28a745;
      background: #d4edda;
    }
    
    /* é€²è¡Œä¸­ã®Phaseã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .phase-progress {
      border-color: #ffc107;
      background: #fff3cd;
    }
  </style>
</head>
<body>
  <div id="root">
    <h1>å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰</h1>
    
    <!-- Phase 1: ä»Šæ—¥ã®å‹¤æ€ è¡¨ç¤º -->
    <div class="phase-section phase-completed">
      <h2 class="phase-title">âœ… Phase 1: ä»Šæ—¥ã®å‹¤æ€ è¡¨ç¤ºï¼ˆReactåŒ–å®Œäº†ï¼‰</h2>
      
      <div class="test-buttons">
        <button class="btn-primary" onclick="simulateClockIn()">å‡ºå‹¤ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn-success" onclick="simulateClockOut()">é€€å‹¤ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn-warning" onclick="testUpdate()">æ›´æ–°é€šçŸ¥ãƒ†ã‚¹ãƒˆ</button>
      </div>
      
      <!-- Reactç‰ˆã®ä»Šæ—¥ã®å‹¤æ€ è¡¨ç¤º -->
      <div id="today-attendance-react"></div>
    </div>

    <!-- Phase 2: å‹¤æ€ å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« -->
    <div class="phase-section phase-progress">
      <h2 class="phase-title">ğŸš€ Phase 2: å‹¤æ€ å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆReactåŒ–é€²è¡Œä¸­ï¼‰</h2>
      
      <div class="test-buttons">
        <button class="btn-info" onclick="testTableUpdate()">ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn-warning" onclick="testMonthChange()">æœˆå¤‰æ›´ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn-success" onclick="testCsvExport()">CSVå‡ºåŠ›ãƒ†ã‚¹ãƒˆ</button>
      </div>
      
      <!-- Reactç‰ˆã®å‹¤æ€ å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« -->
      <div id="attendance-table-react"></div>
    </div>

    <!-- ğŸ†• Phase 3: ä¼‘æš‡ç®¡ç† -->
    <div class="phase-section phase-progress">
      <h2 class="phase-title">ğŸš€ Phase 3: ä¼‘æš‡ç®¡ç†ï¼ˆReactåŒ–é€²è¡Œä¸­ï¼‰</h2>
      
      <div class="test-buttons">
        <button class="btn-info" onclick="testHolidayUpdate()">ä¼‘æš‡ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn-warning" onclick="testPersonalHoliday()">å€‹äººä¼‘æš‡ç”³è«‹ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn-success" onclick="testCompanyHoliday()">ä¼šç¤¾ä¼‘æš‡ç™»éŒ²ãƒ†ã‚¹ãƒˆ</button>
        <button class="btn-secondary" onclick="testHolidayCancel()">ä¼‘æš‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ†ã‚¹ãƒˆ</button>
      </div>
      
      <!-- ğŸ†• Reactç‰ˆã®ä¼‘æš‡ç®¡ç† -->
      <div id="holiday-management-react"></div>
    </div>

    <!-- ğŸ”® Phase 4: çµ±åˆãƒ»æœ€é©åŒ–ï¼ˆäºˆå®šï¼‰ -->
    <div class="phase-section" style="opacity: 0.6;">
      <h2 class="phase-title">ğŸ”® Phase 4: çµ±åˆãƒ»æœ€é©åŒ–ï¼ˆæœªå®Ÿè£…ï¼‰</h2>
      <p style="font-style: italic; color: #666;">
        Phase 3å®Œäº†å¾Œã«å®Ÿè£…äºˆå®šï¼šSPAåŒ–ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€çŠ¶æ…‹ç®¡ç†çµ±åˆ
      </p>
    </div>
  </div>
  
  <!-- é–‹ç™ºç”¨ã®ãƒ†ã‚¹ãƒˆé–¢æ•° -->
  <script>
    // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    window.currentUserId = 7; // APIé€£æºå¯¾å¿œ
    
    // æ—¢å­˜ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    window.formatTime = function(timeStr) {
      if (!timeStr) return '-';
      const parts = timeStr.split(':');
      return `${parts[0]}:${parts[1]}`;
    };
    
    window.calculateWorkHours = function(clockIn, clockOut) {
      const start = new Date(`1970-01-01T${clockIn}`);
      const end = new Date(`1970-01-01T${clockOut}`);
      const diffMs = end - start;
      const hours = Math.floor(diffMs / (1000 * 60 * 60));
      const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
      return `${hours}æ™‚é–“${minutes}åˆ†`;
    };
    
    window.formatMinutesToHoursAndMinutes = function(totalMinutes) {
      const hours = Math.floor(totalMinutes / 60);
      const minutes = totalMinutes % 60;
      return hours > 0 ? `${hours}æ™‚é–“${minutes}åˆ†` : `${minutes}åˆ†`;
    };
    
    // æˆåŠŸãƒ»ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºé–¢æ•°
    window.showAttendanceSuccess = function(message) {
      console.log('âœ… SUCCESS:', message);
      showToast(message, 'success');
    };
    
    window.showAttendanceError = function(message) {
      console.log('âŒ ERROR:', message);
      showToast(message, 'error');
    };
    
    function showToast(message, type) {
      const toast = document.createElement('div');
      const bgColor = type === 'success' ? '#d4edda' : '#f8d7da';
      const textColor = type === 'success' ? '#155724' : '#721c24';
      const borderColor = type === 'success' ? '#c3e6cb' : '#f5c6cb';
      
      toast.style.cssText = `
        position: fixed; top: 20px; right: 20px; z-index: 1000;
        background: ${bgColor}; color: ${textColor}; padding: 1rem; border-radius: 4px;
        border: 1px solid ${borderColor}; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        max-width: 300px; word-wrap: break-word;
      `;
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => {
        if (document.body.contains(toast)) {
          document.body.removeChild(toast);
        }
      }, 3000);
    }
    
    // Phase 1ãƒ†ã‚¹ãƒˆé–¢æ•°
    function simulateClockIn() {
      console.log('å‡ºå‹¤ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.dispatchEvent(new CustomEvent('attendance-updated'));
      window.showAttendanceSuccess('å‡ºå‹¤ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸ');
    }
    
    function simulateClockOut() {
      console.log('é€€å‹¤ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.dispatchEvent(new CustomEvent('attendance-updated'));
      window.showAttendanceSuccess('é€€å‹¤ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸ');
    }
    
    function testUpdate() {
      console.log('æ‰‹å‹•æ›´æ–°ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.dispatchEvent(new CustomEvent('attendance-updated'));
      window.showAttendanceSuccess('æ‰‹å‹•æ›´æ–°ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸ');
    }
    
    // Phase 2ãƒ†ã‚¹ãƒˆé–¢æ•°
    function testTableUpdate() {
      console.log('ğŸ“Š ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.dispatchEvent(new CustomEvent('attendance-updated'));
      window.showAttendanceSuccess('å‹¤æ€ å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
    }
    
    function testMonthChange() {
      console.log('ğŸ“… æœˆå¤‰æ›´ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.showAttendanceSuccess('æœˆå¤‰æ›´ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸ');
    }
    
    function testCsvExport() {
      console.log('ğŸ“„ CSVå‡ºåŠ›ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.showAttendanceSuccess('CSVå‡ºåŠ›ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼‰');
    }
    
    // ğŸ†• Phase 3ãƒ†ã‚¹ãƒˆé–¢æ•°
    function testHolidayUpdate() {
      console.log('ğŸ–ï¸ ä¼‘æš‡ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.dispatchEvent(new CustomEvent('holiday-updated'));
      window.showAttendanceSuccess('ä¼‘æš‡ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
    }
    
    function testPersonalHoliday() {
      console.log('ğŸ“ å€‹äººä¼‘æš‡ç”³è«‹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.showAttendanceSuccess('å€‹äººä¼‘æš‡ç”³è«‹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼‰');
    }
    
    function testCompanyHoliday() {
      console.log('ğŸ¢ ä¼šç¤¾ä¼‘æš‡ç™»éŒ²ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.showAttendanceSuccess('ä¼šç¤¾ä¼‘æš‡ç™»éŒ²ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼‰');
    }
    
    function testHolidayCancel() {
      console.log('âŒ ä¼‘æš‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
      window.showAttendanceSuccess('ä¼‘æš‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼‰');
    }
    
    // ãƒ‡ãƒãƒƒã‚°æƒ…å ±è¡¨ç¤º
    function showDebugInfo() {
      console.log('=== é–‹ç™ºç’°å¢ƒãƒ‡ãƒãƒƒã‚°æƒ…å ± ===');
      console.log('currentUserId:', window.currentUserId);
      console.log('React Devtools:', window.React ? 'âœ… åˆ©ç”¨å¯èƒ½' : 'âŒ æœªæ¤œå‡º');
      console.log('API Proxy:', window.location.origin + '/api');
      console.log('DOM Elements:', {
        todayAttendance: !!document.getElementById('today-attendance-react'),
        attendanceTable: !!document.getElementById('attendance-table-react'),
        holidayManagement: !!document.getElementById('holiday-management-react')
      });
      console.log('==============================');
    }
    
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤º
    window.addEventListener('load', showDebugInfo);
  </script>
  
  <script type="module" src="/src/main.jsx"></script>
</body>
</html>